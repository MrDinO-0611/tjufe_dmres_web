
## 🎯 ComfyUI 是什么？
ComfyUI 是一个基于**节点式工作流**的Stable Diffusion图形界面。它将AI绘画的每一步（如文本编码、去噪采样）变成可拖拽连接的模块，让你能**可视化地搭建、调整并复现复杂的AI图像生成流程**，实现极高的控制自由度和自动化潜力。

**官方网站**：[https://www.comfy.org/](https://www.comfy.org/)   
**官方GitHub**：[https://github.com/comfyanonymous/ComfyUI](https://github.com/comfyanonymous/ComfyUI) 

## 📥 安装与配置
根据你的技术背景选择一种方式，下表对比了主流安装方法：

| 安装方式               | 特点                     | 适用人群                       | 核心步骤                                                                                                                                                                                                 |
| :--------------------- | :----------------------- | :----------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **便携包（推荐新手）** | 解压即用，集成环境。     | Windows用户，追求快速上手。    | 1. 从[GitHub Releases](https://github.com/comfyanonymous/ComfyUI/releases)下载 `ComfyUI_windows_portable_nvidia.7z`。<br>2. 解压，运行 `run_nvidia_gpu.bat`。<br>3. 浏览器访问 `http://127.0.0.1:8188`。 |
| **Git克隆安装**        | 原生，易于更新和自定义。 | 有一定命令行基础的用户。       | 1. `git clone https://github.com/comfyanonymous/ComfyUI.git`<br>2. `cd ComfyUI`<br>3. 可选：创建Python虚拟环境。<br>4. `pip install -r requirements.txt`<br>5. `python main.py`                          |
| **通过Conda安装**      | 环境隔离更干净。         | 使用Anaconda进行包管理的用户。 | 1. `conda create -n comfyui python=3.12`<br>2. `conda activate comfyui`<br>3. 克隆仓库并安装依赖（同上）。                                                                                               |

**关键配置**：
*   **下载基础模型**：将模型文件（`.safetensors`）放入 `ComfyUI/models/checkpoints/`。
*   **国内镜像加速**：如安装依赖慢，可配置Python镜像源（如阿里云）。
*   **共享模型**：若已安装其他AI绘画工具，可修改 `extra_model_paths.yaml` 文件来共享模型，节省空间。

## 🧩 核心插件与生态
ComfyUI的强大源于其插件（自定义节点）生态。**强烈建议首先安装** [ComfyUI Manager](https://github.com/ltdrdata/ComfyUI-Manager)，它可以在图形界面内一键安装、更新其他插件。

下表列出了几个核心方向的插件：

| 插件类别          | 代表插件/节点        | 核心功能                                           | 应用场景                                |
| :---------------- | :------------------- | :------------------------------------------------- | :-------------------------------------- |
| **精准控制**      | **ControlNet**       | 通过草图、姿态、深度图等精确控制图像构图和内容。   | 角色姿势固定、建筑设计、按照草图上色。  |
| **风格/特征微调** | **LoRA**             | 小型模型，为生成图像注入特定画风、角色或物体特征。 | 统一角色形象、快速切换漫画/写实等风格。 |
| **动画生成**      | **AnimateDiff**      | 为静态图像生成动态效果，制作短视频。               | 让插画人物动起来，生成动态海报。        |
| **图像处理**      | **IPAdapter**        | 参考图片的面部、风格或构图生成新图。               | 人脸替换、风格迁移。                    |
| **工作流优化**    | **Efficiency Nodes** | 提供更高效的采样器、加载器等，提升生成速度和体验。 | 提升出图效率，简化复杂工作流。          |

## 🚀 入门与精进路径
1.  **第一步：跑通第一个流程**
    *   启动后，尝试加载一个内置或下载的简单工作流。
    *   理解“提示词→采样器→VAE解码→输出”这个基本链路。
2.  **第二步：学习核心节点**
    *   **Checkpoint加载器**：切换大模型。
    *   **CLIP文本编码器**：输入正面和负面提示词。
    *   **K采样器**：核心调度器，控制采样步数、CFG等。
    *   **VAE解码器**：将潜空间数据转换为最终图像。
3.  **第三步：动手改编工作流**
    *   尝试在现有流程中**添加一个LoRA节点**来改变风格。
    *   或者**添加一个ControlNet预处理器**来控制轮廓。
4.  **第四步：系统学习与探索**
    *   **阅读官方文档与社区教程**。
    *   **参考专业书籍**：如《ComfyUI智能绘画从新手到高手》、《ComfyUI工作流：AI绘画与设计从部署到商业应用》进行系统学习。
    *   在 `Civitai`、`OpenArt` 等平台下载并研究他人分享的复杂工作流。

## ⚠️ 重要注意事项
*   **硬件要求**：建议使用**NVIDIA显卡（显存8GB以上为佳）**，并安装合适的CUDA驱动。Mac用户需确认芯片为Apple Silicon。
*   **网络与下载**：访问GitHub、下载模型可能需要网络辅助。模型文件通常较大，请预留足够硬盘空间。
*   **版权与合规**：请确保从Hugging Face、Civitai等正规平台下载模型，并**遵守模型的创作共享协议**，勿将生成图像用于非法侵权用途。
*   **问题排查**：遇到节点缺失、模型未找到等报错，可优先使用 **ComfyUI Manager** 的“一键更新缺失节点”功能。安装路径避免中文。

---
## 不是英伟达怎么办

### 🖥️ 各类硬件详细方案
下表详细说明了上图各路径的具体操作：

| 硬件类型                          | 推荐方案             | 关键步骤与说明                                                                                                                                                                                                                     |
| :-------------------------------- | :------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **NVIDIA显卡**                    | **标准CUDA方案**     | 按之前指南操作即可。重点是确保安装正确的**CUDA版本PyTorch**。                                                                                                                                                                      |
| **AMD显卡**                       | **官方AMD ROCm方案** | **这是重大更新！** ComfyUI官方现已原生集成AMD ROCm支持。<br>1. **最佳路径**：直接从官方下载为AMD优化的 **Windows .exe安装程序** 或 **便携包**。安装时会自动配置ROCm。<br>2. **手动安装**：通过Git克隆后，需安装适配ROCm的PyTorch。 |
| **集成显卡/无独显/Apple Silicon** | **CPU推理模式**      | 性能较慢，适合体验或简单工作流。<br>1. **通用方法**：在启动命令后添加 `--cpu` 参数，强制使用CPU计算。<br>2. **GGUF格式模型**：一种专为CPU/低端GPU设计的模型格式。需寻找特定GGUF模型文件，并使用对应的加载节点。                    |
| **任何硬件**                      | **云端方案**         | 彻底摆脱硬件限制。<br>使用 **Comfy Cloud**（官方云平台） 或租用云服务器。前者开箱即用，后者可获得完整控制权。                                                                                                                      |

### 💡 重要补充说明
1.  **硬件要求核心**：无论哪种硬件，**大内存（≥16GB）和固态硬盘（SSD）** 都能极大提升体验，减少加载等待。
2.  **AMD方案验证**：安装AMD方案后，可新建一个空白工作流，加入“**检查点加载器**”和“**K采样器**”等基础节点尝试生成。如果成功，即表示环境配置正确。
3.  **CPU方案限制**：生成速度慢，无法运行复杂工作流或视频生成。仅作尝鲜。
4.  **统一后续步骤**：无论通过哪种方式成功启动ComfyUI，后续的**插件安装、模型管理和工作流学习**都是通用的。

